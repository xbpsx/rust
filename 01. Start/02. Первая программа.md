Теперь, когда вы установили Rust, пришло время написать свою первую программу на Rust. Традиционно при изучении нового языка принято писать небольшую программу, которая печатает на экране текст `Привет, мир!`, поэтому мы сделаем то же самое!

[[#Написание и запуск первой Rust программы]]
[[#Анатомия программы на Rust]]
[[#Компиляция и запуск - это отдельные шаги]]

---

### Написание и запуск первой Rust программы

Затем создайте новый исходный файл и назовите его _main.rs_. Файлы Rust всегда заканчиваются расширением _.rs_. Если вы используете более одного слова в имени файла, принято разделять их символом подчёркивания. Например, используйте _hello_world.rs_ вместо _helloworld.rs_.

Теперь откроем файл _main.rs_ для редактирования и введём следующие строки кода:

Название файла: main.rs

```rust
fn main() {
    println!("Привет, мир!");
}
```

Листинг 1-1: Программа, которая печатает `Привет, мир!`

Сохраните файл и вернитесь в окно терминала в каталог _~/projects/hello_world_. В Linux или macOS введите следующие команды для компиляции и запуска файла:

```fish
~/Deverloper/traningrust ❯ rustc ./hello_world.rs

~/Deverloper/traningrust ❯ ./hello_world 
Привет, мир!
```

Команда `rustc` — это **компилятор**: она не запускает программу сама, а превращает ваш текстовый код в исполняемый файл (бинарник), который компьютер может понять. 

```bash
rustc hello_world.rs # создает файл hello_world (машинный код).
```

Чтобы увидеть результат, вам нужно запустить этот созданный файл. Введите в терминале:

```bash
# запускает этот файл. Символы ./ говорят системе: «ищи файл прямо в текущей папке»
./hello_world
```

**Совет на будущее:**  
Если вы планируете писать на Rust часто, используйте **Cargo** (инструмент, который идет в комплекте с Rust). С ним всё проще:

1. Создать проект: `cargo new my_project`
2. Запустить одной командой: `cargo run` (она сама и скомпилирует, и запустит программу).

Если напечаталось `Привет, мир!`, то примите наши поздравления! Вы написали программу на Rust, что делает вас Rust программистом — добро пожаловать!

---
### Анатомия программы на Rust

Давайте рассмотрим «Привет, мир!» программу в деталях. Вот первая часть головоломки:

```rust
fn main() {

}
```

Эти строки определяют функцию с именем `main`. Функция `main` особенная: **это всегда первый код, который запускается в каждой исполняемой программе Rust.** Первая строка объявляет функцию с именем `main`, которая не имеет параметров и ничего не возвращает. Если бы были параметры, они бы заключались в круглые скобки `()`.

> Тело функции заключено в `{}`. Rust требует фигурных скобок вокруг всех тел функций. Хороший стиль — поместить открывающую фигурную скобку на ту же строку, что и объявление функции, добавив между ними один пробел.

Тело функции `main` содержит следующий код:

```rust
println!("Привет, мир!");
```

Эта строка делает всю работу в этой маленькой программе: печатает текст на экран. **Можно заметить четыре важных детали**.

**Во-первых**, стиль Rust предполагает _отступ в четыре пробела_, а не табуляцию.

**Во-вторых**, `println!` вызывается макрос Rust. Если бы вместо него была вызвана функция, она была бы набрана как `println` (без `!`). Более подробно мы обсудим макросы Rust в главе 19. Пока достаточно знать, что использование `!` подразумевает вызов макроса вместо обычной функции, и _что макросы не всегда подчиняются тем же правилам как функции._

**В-третьих**, вы видите строку `"Привет, мир!"`. Мы передаём её в качестве аргумента макросу `println!`, и она выводится на экран.

**В-четвёртых, мы завершаем строку точкой с запятой** (`;`), которая указывает на окончание этого выражения и возможность начала следующего. Большинство строк кода Rust _заканчиваются точкой с запятой_.

---
### Компиляция и запуск - это отдельные шаги

Вы только что запустили впервые созданную программу, поэтому давайте рассмотрим каждый шаг этого процесса.

Перед запуском программы на Rust вы должны **скомпилировать её** с помощью компилятора Rust, введя команду `rustc` и передав ей имя вашего исходного файла, например:

```console
$ rustc main.rs
```

Если у вас есть опыт работы с C или C++, вы заметите, что это похоже на `gcc` или `clang`. После успешной компиляции Rust выводит двоичный исполняемый файл.

В Linux, macOS и PowerShell в Windows вы можете увидеть исполняемый файл, введя команду `ls` в оболочке:

```console
$ ls
main  main.rs
```

В Linux и macOS вы увидите два файла. При использовании PowerShell в Windows вы увидите такие же три файла, как и при использовании CMD. Используя CMD в Windows, введите следующее:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

Это показывает исходный код файла с расширением _.rs_, исполняемый файл (_main.exe_ на Windows, но _main_ на всех других платформах) и, при использовании Windows, файл, содержащий отладочную информацию с расширением _.pdb_. Отсюда вы запускаете файлы _main_ или _main.exe_, например:

```console
$ ./main # для Linux
> .\main.exe # для Windows
```

Если ваш _main.rs_ — это ваша программа «Привет, мир!», эта строка выведет в терминал `Привет, мир!`.

Если вы лучше знакомы с динамическими языками, такими как Ruby, Python или JavaScript, возможно, вы не привыкли компилировать и запускать программу как отдельные шаги. Rust — это предварительно _скомпилированный_ язык, то есть вы можете скомпилировать программу и передать исполняемый файл кому-то другому, и он сможет запустить его даже без установленного Rust. Если вы даёте кому-то файл _.rb_ , _.py_ или _.js_, у него должна быть установлена реализация Ruby, Python или JavaScript (соответственно). Но в этих языках вам нужна только одна команда для компиляции и запуска вашей программы. В дизайне языков программирования всё — компромисс.

Компиляция с помощью `rustc` подходит для простых программ, но по мере роста вашего проекта вы захотите управлять всеми параметрами и упростить передачу кода. Далее мы познакомим вас с инструментом Cargo, который поможет вам писать программы из реального мира на Rust.
